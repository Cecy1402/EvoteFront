(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d229055"],{dc55:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[t.displayList?a("div",[a("candidates-list",{on:{"open-form":function(e){return t.setDisplayList(e)},"update-list":function(e){return t.updateList(e)}}})],1):a("div",[a("candidates-form",{attrs:{candidateList:t.candidateList},on:{"open-list":function(e){return t.setDisplayList(e)}}})],1)])},s=[],n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card"},[a("Toast"),a("Dialog",{style:{width:"350px"},attrs:{header:"Confirmación",visible:t.displayConfirmation,modal:!0},on:{"update:visible":function(e){t.displayConfirmation=e}},scopedSlots:t._u([{key:"footer",fn:function(){return[a("Button",{staticClass:"p-button-text",attrs:{label:"No",icon:"pi pi-times"},on:{click:function(e){return t.closeConfirmation()}}}),a("Button",{staticClass:"p-button-text p-button-danger",attrs:{label:"Si",icon:"pi pi-check",autofocus:""},on:{click:function(e){return t.deleteList()}}})]},proxy:!0}])},[a("div",{staticClass:"confirmation-content"},[a("i",{staticClass:"pi pi-info-circle p-mr-3",staticStyle:{"font-size":"2rem"}}),a("span",[t._v("Estas seguro que deseas continuar?")])])]),a("div",{staticClass:"p-m-3"},[a("h3",[t._v("Listas de candidatos")]),a("div",{staticClass:"p-d-flex p-jc-end"},[a("div",{staticClass:"p-mr-2"},[a("span",{staticClass:"p-input-icon-left"},[a("i",{staticClass:"pi pi-search"}),a("InputText",{attrs:{type:"text",placeholder:"Buscar nombre o slogan"},on:{keyup:function(e){return t.searchCandidate(t.searchCan)}},model:{value:t.searchCan,callback:function(e){t.searchCan=e},expression:"searchCan"}})],1)]),a("Button",{attrs:{label:"Nuevo ",icon:"pi pi-plus",iconPos:"left",align:"right"},on:{click:function(e){return t.openForm()}}})],1),a("br"),a("DataTable",{attrs:{value:t.candidatesList,expandedRows:t.expandedRows,dataKey:"id",responsiveLayout:"scroll",paginator:!0,rows:5,sortOrder:1},on:{"update:expandedRows":function(e){t.expandedRows=e},"update:expanded-rows":function(e){t.expandedRows=e}},scopedSlots:t._u([{key:"expansion",fn:function(e){return[a("span",{staticClass:"p-text-bold"},[t._v("MIEMBROS: ")]),a("DataTable",{attrs:{value:e.data.candidate_set,dataKey:"id",responsiveLayout:"scroll"}},[a("Column",{attrs:{field:"student.nombres"},scopedSlots:t._u([{key:"header",fn:function(){return[t._v(" NOMBRES")]},proxy:!0}],null,!0)}),a("Column",{attrs:{field:"student.apellidos"},scopedSlots:t._u([{key:"header",fn:function(){return[t._v(" APELLIDOS ")]},proxy:!0}],null,!0)}),a("Column",{attrs:{field:"student.carrera"},scopedSlots:t._u([{key:"header",fn:function(){return[t._v(" CARRERA ")]},proxy:!0}],null,!0)}),a("Column",{attrs:{field:"student.ciclo"},scopedSlots:t._u([{key:"header",fn:function(){return[t._v(" CICLO ")]},proxy:!0}],null,!0)}),a("Column",{attrs:{field:"student.paralelo"},scopedSlots:t._u([{key:"header",fn:function(){return[t._v(" PARALELO ")]},proxy:!0}],null,!0)}),a("Column",{attrs:{field:"photo"},scopedSlots:t._u([{key:"header",fn:function(){return[t._v(" FOTO ")]},proxy:!0}],null,!0)}),a("Column",{attrs:{field:"position"},scopedSlots:t._u([{key:"header",fn:function(){return[t._v(" CARGO ")]},proxy:!0}],null,!0)})],1)]}}])},[a("Column",{attrs:{expander:!0,headerStyle:"width: 1rem"}}),a("Column",{attrs:{field:"created",header:"FECHA CREADO"}}),a("Column",{attrs:{field:"name",header:"NOMBRE"}}),a("Column",{attrs:{field:"number",header:"NÚMERO"}}),a("Column",{attrs:{field:"slogan",header:"SLOGAN"}}),a("Column",{attrs:{field:"period",header:"PERIODO"}}),a("Column",{scopedSlots:t._u([{key:"body",fn:function(e){return[a("Button",{staticClass:"p-button-warning p-mr-2",attrs:{icon:"pi pi-user-edit"},on:{click:function(a){return t.updateList(e.data)}}})]}}])})],1)],1)],1)},o=[],c=(a("ac6a"),a("cf79")),d=a("c1df"),l=a.n(d),r={data:function(){return{displayConfirmation:!1,searchCan:"",candidatesList:[],expandedRows:[]}},candidateService:null,created:function(){this.candidateService=new c["a"]},mounted:function(){this.getCandidates()},methods:{searchCandidate:function(t){var e=this;t.length>1?this.candidateService.searchCandidates(t).then((function(t){t.results.forEach((function(t){t.created=l()(t.created).format("DD/MM/yyyy hh:mm")})),e.candidatesList=t.results})).catch((function(t){console.log("ERROR: ",t)})):this.getCandidates()},openConfirmation:function(t){this.idEliminar=t,this.displayConfirmation=!0},closeConfirmation:function(){this.displayConfirmation=!1},deleteList:function(){var t=this;this.candidateService.deleteCandidates(this.idEliminar).then((function(){t.$toast.add({severity:"info",summary:"Mensaje informativo",detail:"Eliminado correctamente",life:3e3}),t.getCandidates(),t.closeConfirmation()})).catch((function(t){console.log("ERROR: ",t)}))},updateList:function(t){this.$emit("update-list",t)},getCandidates:function(){var t=this;this.candidateService.getCandidates().then((function(e){e.results.forEach((function(t){t.created=l()(t.created).format("DD/MM/yyyy hh:mm")})),t.candidatesList=e.results})).catch((function(t){console.log("ERROR: ",t)}))},openForm:function(){this.$emit("open-form",!1)}}},u=r,p=a("2877"),f=Object(p["a"])(u,n,o,!1,null,"1ddf7192",null),m=f.exports,h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card"},[a("div",{staticClass:"p-m-3"},[a("Toast"),t._m(0),a("div",{staticClass:"p-d-flex p-ai-center p-jc-center"},[a("div",{staticClass:"p-col-10"},[a("div",{staticClass:"p-grid p-fluid p-ai-center p-jc-center"},[a("div",{staticClass:"card p-col-2 p-mt-4 p-ai-center p-jc-center",staticStyle:{height:"150px"}},[a("FileUpload",{attrs:{mode:"basic",name:"demo[]",accept:"image/*",customUpload:!0,auto:!0},on:{uploader:t.onUpload}}),a("img",{attrs:{src:t.fotoListaB64,width:"100",height:"100",alt:"SIN FOTO"}})],1),a("div",{staticClass:"p-grid p-col-9 p-d-flex p-fluid p-ai-center p-jc-center"},[a("div",{staticClass:"p-col-3"},[a("div",{staticClass:"p-field"},[a("span",{staticClass:"p-float-label"},[a("InputText",{attrs:{id:"inputtext",type:"text"},model:{value:t.listName,callback:function(e){t.listName=e},expression:"listName"}}),a("label",{attrs:{for:"inputtext"}},[t._v("Nombre")])],1)])]),a("div",{staticClass:"p-field p-col-3"},[a("span",{staticClass:"p-float-label"},[a("InputNumber",{attrs:{id:"withoutgrouping",mode:"decimal",useGrouping:!1},model:{value:t.listNumber,callback:function(e){t.listNumber=e},expression:"listNumber"}}),a("label",{attrs:{for:"withoutgrouping"}},[t._v("Número")])],1)]),a("div",{staticClass:"p-field p-col-4"},[a("span",{staticClass:"p-float-label"},[a("Dropdown",{attrs:{options:t.periodos,optionLabel:"name",optionValue:"code",change:t.getCandidates()},model:{value:t.periodSelected,callback:function(e){t.periodSelected=e},expression:"periodSelected"}}),a("label",[t._v("Periodo")])],1)]),a("div",{staticClass:"p-field p-col-10"},[a("span",{staticClass:"p-float-label"},[a("InputText",{attrs:{id:"float-input",type:"text"},model:{value:t.listSlogan,callback:function(e){t.listSlogan=e},expression:"listSlogan"}}),a("label",{attrs:{for:"float-input"}},[t._v("Slogan")])],1)])])])])])],1),a("div",{staticClass:"p-m-1"},[t._m(1),a("div",{staticClass:"p-d-flex p-ai-center p-jc-center"},[a("TabView",{staticClass:"p-col-10",staticStyle:{padding:"0rem"}},t._l(t.tabs,(function(e){return a("TabPanel",{key:e.position,attrs:{header:e.position}},[a("div",{staticClass:"p-grid p-mt-2 p-fluid p-ai-center p-jc-center"},[a("div",{staticClass:"card p-col-2 p-mr-2 p-mt-4 p-ai-center p-jc-center",staticStyle:{height:"150px"}},[a("FileUpload",{attrs:{mode:"basic",name:"demo[]",accept:"image/*",auto:!0,customUpload:!0},on:{uploader:function(a){return t.subirImagenCandidatos(a,e)}}}),a("img",{attrs:{src:e.foto,width:"100",height:"100"}})],1),a("div",{staticClass:"p-grid p-col-9 p-d-flex p-fluid p-ai-center p-jc-center"},[a("div",{staticClass:"p-col-5"},[a("div",{staticClass:"p-field"},[a("div",{staticClass:"p-inputgroup"},[a("div",{staticClass:"p-float-label"},[a("InputText",{attrs:{type:"text"},on:{blur:function(a){return t.searchStudent(e)}},model:{value:e.student,callback:function(a){t.$set(e,"student",a)},expression:"tab.student"}}),a("Button",{attrs:{icon:"pi pi-search"},on:{click:function(a){return t.searchStudent(e)}}}),a("label",[t._v("Cédula")])],1)])])]),a("div",{staticClass:"p-col-10"},[a("div",{staticClass:"p-field"},[a("span",{staticClass:"p-float-label"},[a("InputText",{attrs:{type:"text",readonly:""},model:{value:e.name,callback:function(a){t.$set(e,"name",a)},expression:"tab.name"}}),a("label",[t._v("Nombre")])],1)])]),a("div",{staticClass:"p-col-6"},[a("div",{staticClass:"p-field"},[a("span",{staticClass:"p-float-label"},[a("InputText",{attrs:{type:"text",readonly:""},model:{value:e.degree,callback:function(a){t.$set(e,"degree",a)},expression:"tab.degree"}}),a("label",[t._v("Carrera")])],1)])]),a("div",{staticClass:"p-col-4"},[a("div",{staticClass:"p-field"},[a("span",{staticClass:"p-float-label"},[a("InputText",{attrs:{type:"text",readonly:""},model:{value:e.course,callback:function(a){t.$set(e,"course",a)},expression:"tab.course"}}),a("label",[t._v("Ciclo")])],1)])])]),a("br"),a("p",[t._v("\n              Antes de dar clic en Guardar, complete la informacion de todos\n              los candidatos\n            ")])])])})),1)],1),a("br"),a("div",{staticClass:"p-grid p-jc-end p-d-flex p-col-10"},[a("Button",{staticClass:"p-mr-2 p-button-secondary",attrs:{label:"Cancelar",icon:"pi pi-times"},on:{click:function(e){return t.closeForm()}}}),a("Button",{staticClass:"p-button-success",attrs:{label:"Guardar",icon:"pi pi-check"},on:{click:function(e){return t.createList()}}})],1)])])},v=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"p-text-center"},[a("b",[t._v("Información lista:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"p-text-center"},[a("i",{staticClass:"pi pi-user p-mr-2"}),a("b",[t._v("Información estudiante:")])])}],C=(a("7514"),a("7f7f"),a("0266")),b=a("c841"),g={props:["candidateList"],data:function(){return{fotoListaB64:"",periodos:[],estudiantesCandidatos:null,listId:"",periodSelected:null,listName:"",listNumber:null,listSlogan:"",tabs:[{foto:"",student:"",name:"",degree:"",course:"",position:"PRESIDENTE"},{foto:"",student:"",name:"",degree:"",course:"",position:"VICEPRESIDENTE"},{foto:"",student:"",name:"",degree:"",course:"",position:"SECRETARIO"},{foto:"",student:"",name:"",degree:"",course:"",position:"TESORERO"},{foto:"",student:"",name:"",degree:"",course:"",position:"VOCAL I"},{foto:"",student:"",name:"",degree:"",course:"",position:"VOCAL II"},{foto:"",student:"",name:"",degree:"",course:"",position:"VOCAL III"}]}},periodService:null,UserService:null,candidateService:null,created:function(){this.periodService=new C["a"],this.candidateService=new c["a"],this.userService=new b["a"]},mounted:function(){var t=this;this.getPeriod(),null!=this.candidateList&&(this.fotoListaB64=this.candidateList.foto,this.listId=this.candidateList.id,this.listName=this.candidateList.name,this.listNumber=this.candidateList.number,this.listSlogan=this.candidateList.slogan,this.periodSelected=this.candidateList.period,this.tabs.forEach((function(e){t.candidateList.candidate_set.forEach((function(t){e.position==t.position&&(e.id=t.id,e.foto=t.foto,e.student=t.student.identificacion,e.name=t.student.nombres+""+t.student.apellidos,e.degree=t.student.carrera,e.course=t.student.ciclo,e.photo=t.student.photo,e.listInfo=t.listInfo)}))})))},methods:{getCandidates:function(){var t=this;null!=this.periodSelected&&(this.estudiantesCandidatos=[],this.candidateService.getCandidatesActuales(this.periodSelected).then((function(e){e.results.forEach((function(e){e.candidate_set.forEach((function(e){t.estudiantesCandidatos.push(e.student)}))}))})).catch((function(t){console.log("ERROR: ",t)})))},subirImagenCandidatos:function(t,e){var a=new FileReader;a.readAsDataURL(t.files[0]),a.onload=function(){e.foto=a.result}},onUpload:function(t){var e=this,a=new FileReader;a.readAsDataURL(t.files[0]),a.onload=function(){console.log(a.result),e.fotoListaB64=a.result}},searchStudent:function(t){var e=this;null!=this.estudiantesCandidatos?10==t.student.length?this.userService.UserSearch(t.student).then((function(a){if(1==a.count){var i=e.estudiantesCandidatos.find((function(t){return t.identificacion=a.results[0].identificacion}));null!=i?e.$toast.add({severity:"warn",summary:"Mensaje de advertencia",detail:"El estudiante ya se encuentra en una lista",life:3e3}):(console.log(a),t.name=a.results[0].nombres+" "+a.results[0].apellidos,t.degree=a.results[0].carrera,t.course=a.results[0].ciclo)}else e.$toast.add({severity:"warn",summary:"Mensaje de advertencia",detail:"No se encontro un estudiante con esa cedula",life:3e3}),e.cleanStudent(t)})).catch((function(t){console.log(t),e.$toast.add({severity:"error",summary:"Mensaje de error",detail:"Lo sentimos ocurrio un error",life:3e3})})):(this.cleanStudent(t),this.$toast.add({severity:"warn",summary:"Mensaje de advertencia",detail:"La Cedula debe tener 10 caracteres",life:3e3})):this.$toast.add({severity:"warn",summary:"Mensaje de advertencia",detail:"debe selecionar un Periodo",life:3e3})},cleanStudent:function(t){t.name="",t.degree="",t.course=""},getPeriod:function(){var t=this;this.periodService.getPeriod().then((function(e){t.periodos=e.results.map((function(t){return{name:t.startYear.substring(0,4)+"/"+t.endYear.substring(0,4),code:t.id}}))})).catch((function(t){console.log("ERROR: ",t)}))},closeForm:function(){this.$emit("open-list",!0)},createList:function(){var t=this,e={};e.name=this.listName,e.number=this.listNumber,e.slogan=this.listSlogan,e.period=this.periodSelected,e.foto=this.fotoListaB64,e.candidate_set=this.tabs,null!=this.candidateList?this.candidateService.patchCandidates(this.listId,e).then((function(){t.$toast.add({severity:"info",summary:"Mensaje informativo",detail:"Registro actualizado correctamente",life:3e3}),t.closeForm()})).catch((function(t){console.log("ERROR: ",t)})):this.candidateService.postCandidates(e).then((function(){t.$toast.add({severity:"info",summary:"Mensaje informativo",detail:"Registro creado correctamente",life:3e3}),t.closeForm()})).catch((function(t){console.log("ERROR: ",t)}))},disabled:function(){}}},y=g,S=Object(p["a"])(y,h,v,!1,null,"4a860784",null),x=S.exports,L={components:{CandidatesForm:x,CandidatesList:m},data:function(){return{displayList:!0,candidateList:null}},methods:{updateList:function(t){this.candidateList=t,this.displayList=!1},setDisplayList:function(t){this.candidateList=null,this.displayList=t}}},R=L,_=Object(p["a"])(R,i,s,!1,null,"13c367ac",null);e["default"]=_.exports}}]);
//# sourceMappingURL=chunk-2d229055.a7bcfa79.js.map